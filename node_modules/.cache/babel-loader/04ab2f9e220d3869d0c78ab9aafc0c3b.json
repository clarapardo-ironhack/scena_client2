{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\clara\\\\OneDrive\\\\Escritorio\\\\ironhack\\\\Bloque3\\\\scena_client\\\\src\\\\context\\\\auth.context.js\",\n    _s = $RefreshSig$();\n\nimport React, { createContext, useState } from 'react';\nimport { useEffect } from 'react';\nimport authService from '../services/auth.service';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\n\nfunction AuthProviderWrapper(props) {\n  _s();\n\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [user, setUser] = useState(null);\n\n  const storeToken = token => {\n    localStorage.setItem(\"authToken\", token);\n  };\n\n  const removeToken = () => {\n    localStorage.removeItem(\"authToken\");\n  };\n\n  const getToken = () => {\n    return localStorage.getItem(\"authToken\");\n  };\n\n  const authenticateUser = () => {\n    const storedToken = getToken();\n\n    if (!storedToken) {\n      logOutUser();\n    } else {\n      authService.verify(storedToken).then(_ref => {\n        let {\n          data\n        } = _ref;\n        const user = data;\n        setIsLoggedIn(true);\n        setIsLoading(false);\n        setUser(user);\n      }).catch(() => logOutUser());\n    }\n  };\n\n  const logOutUser = () => {\n    removeToken();\n    setIsLoggedIn(false);\n    setIsLoading(false);\n    setUser(null);\n  };\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      isLoggedIn,\n      isLoading,\n      user,\n      storeToken,\n      authenticateUser,\n      logOutUser\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AuthProviderWrapper, \"s8wSgYPEufxLSIRwimHbUY9xO7g=\");\n\n_c = AuthProviderWrapper;\nexport { AuthContext, AuthProviderWrapper };\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProviderWrapper\");","map":{"version":3,"names":["React","createContext","useState","useEffect","authService","AuthContext","AuthProviderWrapper","props","isLoggedIn","setIsLoggedIn","isLoading","setIsLoading","user","setUser","storeToken","token","localStorage","setItem","removeToken","removeItem","getToken","getItem","authenticateUser","storedToken","logOutUser","verify","then","data","catch","children"],"sources":["C:/Users/clara/OneDrive/Escritorio/ironhack/Bloque3/scena_client/src/context/auth.context.js"],"sourcesContent":["import React, { createContext, useState } from 'react'\r\nimport { useEffect } from 'react';\r\nimport authService from '../services/auth.service';\r\n\r\nconst AuthContext = createContext()\r\n\r\nfunction AuthProviderWrapper(props) {\r\n\r\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [user, setUser] = useState(null);\r\n\r\n    const storeToken = (token) => {\r\n        localStorage.setItem(\"authToken\", token)\r\n    }\r\n\r\n    const removeToken = () => {\r\n        localStorage.removeItem(\"authToken\")\r\n    }\r\n\r\n    const getToken = () => {\r\n        return localStorage.getItem(\"authToken\")\r\n    }\r\n\r\n\r\n    const authenticateUser = () => {\r\n\r\n        const storedToken = getToken()\r\n\r\n        if (!storedToken) {\r\n            logOutUser()\r\n        } else {\r\n            authService\r\n                .verify(storedToken)\r\n                .then(({ data }) => {\r\n                    const user = data\r\n                    setIsLoggedIn(true);\r\n                    setIsLoading(false);\r\n                    setUser(user);\r\n                })\r\n                .catch(() => logOutUser())\r\n        }\r\n    }\r\n\r\n    const logOutUser = () => {\r\n        removeToken()\r\n        setIsLoggedIn(false);\r\n        setIsLoading(false);\r\n        setUser(null);\r\n    }\r\n\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ isLoggedIn, isLoading, user, storeToken, authenticateUser, logOutUser }}>\r\n            {props.children}\r\n        </AuthContext.Provider>\r\n    )\r\n}\r\n\r\nexport { AuthContext, AuthProviderWrapper };"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,QAA/B,QAA+C,OAA/C;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,OAAOC,WAAP,MAAwB,0BAAxB;;AAEA,MAAMC,WAAW,gBAAGJ,aAAa,EAAjC;;AAEA,SAASK,mBAAT,CAA6BC,KAA7B,EAAoC;EAAA;;EAEhC,MAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BP,QAAQ,CAAC,KAAD,CAA5C;EACA,MAAM,CAACQ,SAAD,EAAYC,YAAZ,IAA4BT,QAAQ,CAAC,IAAD,CAA1C;EACA,MAAM,CAACU,IAAD,EAAOC,OAAP,IAAkBX,QAAQ,CAAC,IAAD,CAAhC;;EAEA,MAAMY,UAAU,GAAIC,KAAD,IAAW;IAC1BC,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCF,KAAlC;EACH,CAFD;;EAIA,MAAMG,WAAW,GAAG,MAAM;IACtBF,YAAY,CAACG,UAAb,CAAwB,WAAxB;EACH,CAFD;;EAIA,MAAMC,QAAQ,GAAG,MAAM;IACnB,OAAOJ,YAAY,CAACK,OAAb,CAAqB,WAArB,CAAP;EACH,CAFD;;EAKA,MAAMC,gBAAgB,GAAG,MAAM;IAE3B,MAAMC,WAAW,GAAGH,QAAQ,EAA5B;;IAEA,IAAI,CAACG,WAAL,EAAkB;MACdC,UAAU;IACb,CAFD,MAEO;MACHpB,WAAW,CACNqB,MADL,CACYF,WADZ,EAEKG,IAFL,CAEU,QAAc;QAAA,IAAb;UAAEC;QAAF,CAAa;QAChB,MAAMf,IAAI,GAAGe,IAAb;QACAlB,aAAa,CAAC,IAAD,CAAb;QACAE,YAAY,CAAC,KAAD,CAAZ;QACAE,OAAO,CAACD,IAAD,CAAP;MACH,CAPL,EAQKgB,KARL,CAQW,MAAMJ,UAAU,EAR3B;IASH;EACJ,CAjBD;;EAmBA,MAAMA,UAAU,GAAG,MAAM;IACrBN,WAAW;IACXT,aAAa,CAAC,KAAD,CAAb;IACAE,YAAY,CAAC,KAAD,CAAZ;IACAE,OAAO,CAAC,IAAD,CAAP;EACH,CALD;;EAQA,oBACI,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAE;MAAEL,UAAF;MAAcE,SAAd;MAAyBE,IAAzB;MAA+BE,UAA/B;MAA2CQ,gBAA3C;MAA6DE;IAA7D,CAA7B;IAAA,UACKjB,KAAK,CAACsB;EADX;IAAA;IAAA;IAAA;EAAA,QADJ;AAKH;;GAnDQvB,mB;;KAAAA,mB;AAqDT,SAASD,WAAT,EAAsBC,mBAAtB"},"metadata":{},"sourceType":"module"}